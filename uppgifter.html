<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Uppgifter – Grupp A</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f7f6;
      margin: 0;
      padding: 0;
    }

    header {
      background: #1e8e6a;
      color: white;
      padding: 16px;
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 16px;
    }

    .section {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-top: 6px;
    }

    .button-row {
      margin-top: 16px;
      display: flex;
      gap: 10px;
    }

    button {
      padding: 10px 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: white;
    }

    .btn-save {
      background: #1e8e6a;
    }

    .btn-delete {
      background: #c0392b;
    }
  </style>
</head>

<body>

<header>
  <h1>Uppgifter</h1>
</header>

<div class="container">

  <!-- SECTION: GROUP -->
  <div class="section">
    <h2>Våra uppgifter – Grupp A</h2>

    <label for="groupNameInput">Gruppnamn</label>
    <input id="groupNameInput" type="text" placeholder="Skriv gruppens namn">

    <div class="button-row">
      <button class="btn-save" id="saveBtn">Spara</button>
      <button class="btn-delete" id="clearBtn">Rensa</button>
    </div>
  </div>

</div>

<!-- FIREBASE + LOGIC -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import {
    getFirestore,
    doc,
    setDoc,
    getDoc,
    deleteDoc
  } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDJsZ4LZVrBucavpTdhXbKxyE_BFeZFFKs",
    authDomain: "fir-console-df3e9.firebaseapp.com",
    projectId: "fir-console-df3e9"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const GROUP_ID = "gruppA";

  const input = document.getElementById("groupNameInput");
  const saveBtn = document.getElementById("saveBtn");
  const clearBtn = document.getElementById("clearBtn");

  async function loadGroupName() {
    const snap = await getDoc(doc(db, "groups", GROUP_ID));
    if (snap.exists()) {
      input.value = snap.data().name;
    }
  }

  saveBtn.addEventListener("click", async () => {
    if (!input.value.trim()) {
      alert("Skriv gruppens namn");
      return;
    }

    await setDoc(doc(db, "groups", GROUP_ID), {
      name: input.value.trim(),
      updatedAt: new Date()
    });

    alert("Sparat");
  });

  clearBtn.addEventListener("click", async () => {
    if (!confirm("Är du säker?")) return;

    await deleteDoc(doc(db, "groups", GROUP_ID));
    input.value = "";
  });

  loadGroupName();
import { db } from "./firebase.js";
import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

document.querySelector(".btn-save").addEventListener("click", async () => {
  const gruppnamn = document.querySelector('input[placeholder="Skriv gruppens namn"]').value;

  if (!gruppnamn) {
    alert("Group name required");
    return;
  }

  await addDoc(collection(db, "groups"), {
    name: gruppnamn,
    createdAt: new Date()
  });

  alert("Saved to Firebase ✅");
});</script>

</body>
</html>

